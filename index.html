<!DOCTYPE html>
<html>
<head>
    <title>InterfaceZ: Return of the Z-iffying</title>
    <link rel="shortcut icon" href="images/favicon.ico" />
    <link href="css/normalize.css" rel="stylesheet"/>
    <link href="css/style.css" rel="stylesheet"/>
    <script src="js/jquery-2.1.0.js"></script>
    <script src="js/amcharts.js"></script>
    <script src="js/amexport.js"></script>
    <script src="js/serial.js"></script>
    <script src="js/light.js"></script>
    <script src="js/fits.js"></script>
    <script src="js/tools.js"></script>
    <script src="js/classes.js"></script>
    <script src="js/templates.js"></script>
    <script src="js/angular.js"></script>
    <script src="js/angular-animate.js"></script>
    <script src="js/angular-drop.js"></script>
    <script src="js/app.js"></script>

</head>
<body ng-app="thesis" ng-controller="MainController">
    <div class="main">
        <div class="header">
            <h1>InterfaceZ</h1>
            <nav class="menu" ng-click="$event.preventDefault()">
                <ul>
                    <li ng-repeat="i in menuOptions" ng-click="$parent.active=i" ng-class="{active:i==active}">
                        <h2>{{i}}</h2>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="content">
            <div class="boxed fitsFileSelector left" dropzone>
                <h3 ng-show="!fitsFile.name">Drop a FITS File</h3>
                <div class="info" ng-show="fitsFile.name">
                    <h3>{{fitsFile.name}}</h3>
                    <ul>
                        <li ng-repeat="i in fits.properties | onlyDisplay"><b class="label">{{i.label}}:</b> {{i.displayValue}}</li>
                    </ul>
                </div>
            </div>
            <div class="boxed lined left spectralList scroll">
                <ul>
                    <li ng-repeat="i in fits.spectra track by i.id" ng-dblclick="$parent.active='Detailed'" ng-click="$parent.setActiveIndex(i.index)" ng-class="{activeSelect:activeIndex==i.index}" class="spectraSmall">
                        <p>{{i.id}}</p>
                        <div class="info" id="spectra{{i.id}}">
                            <p ng-show="i.matchedTID==null">Not analysed</p>
                            <p ng-show="i.matchedTID!=null">{{i.matchedTID}}, z={{i.matchedZ.toFixed(3)}} Chi2: {{i.matchedChi2.toFixed(2)}}</p>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="centralheader">
                <div class="overviewheader" ng-show="active=='Overview'">
                    <p ng-click="overviewLarge=0">Small</p>
                    <p ng-click="overviewLarge=1">Large</p>
                    <p ng-click="toggleDisp('raw')">Raw</p>
                    <p ng-click="toggleDisp('pre')">Preprocessed</p>
                    <p ng-click="toggleDisp('matched')">Matched</p>
                </div>
                <div class="detailedheader" ng-show="active=='Detailed'">
                </div>
            </div>
            <div class="central">
                <div class="overviewList" ng-show="active=='Overview'">
                    <ul>
                        <li class="overviewItem lined overviewSmall" ng-dblclick="$parent.active='Detailed'" ng-click="$parent.setActiveIndex(i.index)" ng-class="{activeSelect:activeIndex==i.index}" ng-repeat="i in fits.spectra track by i.id">
                            <div class="topbar"><b>ID: {{i.id}}</b><p ng-show="i.matchedTID!=null">T: {{i.matchedTID}}, z={{i.matchedZ.toFixed(3)}} Chi2: {{i.matchedChi2.toFixed(2)}}</p></div>
                            <div class="graph"><canvas id="smallGraphCanvas{{i.id}}" style="width:100%; height:100%;"></canvas>{{fits.renderOverview(i.index)}}</div>
                        </li>
                    </ul>
                </div>
                <div class="templateList" ng-show="active=='Templates'">
                    <ul>
                        <li class="overviewItem lined overviewLarge" ng-repeat="t in templates track by t.id">
                            <div class="topbar"><b>Template ID: {{t.id}}</b><p>Name: {{t.name}}, Lambda_start: {{t.start_lambda.toFixed(2)}} Lambda_end: {{t.end_lambda.toFixed(2)}}</p></div>
                            <div class="graph"><canvas id="smallTemplateCanvas{{$index}}" style="width:100%; height:100%;"></canvas>{{renderTemplate($index)}}</div>
                        </li>
                    </ul>
                </div>
                <div class="settingsList" ng-show="active=='Settings'">
                    <h3>Global Properties:</h3>
                    <ul>
                        <li ng-repeat="(name, prop) in properties"><label>{{prop.label}}:</label></li>
                    </ul>
                </div>
                <div class="detailedView" ng-if="active=='Detailed'">
                    <div id="big">{{renderBig('big')}}</div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>